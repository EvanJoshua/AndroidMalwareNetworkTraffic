/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package neuralnetwork;

/**
 *
 * @author asus
 */
import java.io.File;
import java.io.PrintWriter;
import static neuralnetwork.Driver.numberOfEpoch;
import weka.core.Instances;
import weka.core.converters.ConverterUtils.DataSource;
//import weka.attributeSelection.PrincipalComponents;
import weka.filters.Filter;
import weka.filters.UnsupervisedFilter;
import weka.filters.unsupervised.attribute.PrincipalComponents;

public class PCA {

    public static void main(String args[]) {
        try {
            // Load the Data

            DataSource source = new DataSource("D:\\StupidYou\\Course\\TA\\Datasets\\Final\\Final after random\\PCA\\TotalBeforePCA.csv");
            Instances data = source.getDataSet();

            // Perform PCA.
            PrincipalComponents pca = new PrincipalComponents();
            pca.setCenterData(false);
            pca.setVarianceCovered(0.95);
            pca.setDebug(false);
            pca.setMaximumAttributes(3);
            pca.setDoNotCheckCapabilities(false);
            pca.setInputFormat(data);
            
            Instances newData;
            newData = pca.useFilter(data, pca);
            System.out.println(newData.get(0).toString().split(",").length);
            
            PrintWriter pw = new PrintWriter(new File("totalData.csv"));
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < newData.size(); i++) {
                String tampung[] = newData.get(i).toString().split(",");
                for (int j = 0; j < tampung.length; j++) {
                    sb.append(tampung[j]);
                    sb.append(',');
                }
                sb.append('\n');
            }
            pw.write(sb.toString());
            pw.close();
            System.out.println("Save To File Done!");

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

}
